<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="date" content="2022-10-19" />

<title>vignette PlasmodeSim</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">vignette PlasmodeSim</h1>
<h4 class="date">2022-10-19</h4>



<p>Welcome to the vignette about the R package PlasmodeSim. This package
is still under development.</p>
<div id="installing-plasmodesim-using-remotes" class="section level2">
<h2>installing plasmodeSim using remotes</h2>
<p>To install using <code>remotes</code> run:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;remotes&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;GidiusVanDeKamp/PlasmodeSim&quot;</span>)</span></code></pre></div>
</div>
<div id="setting-up" class="section level2">
<h2>Setting up</h2>
<p>This documents skips some parts, we have skipped the steps to obtain
the plpResults and the plpData.</p>
<p>We begin by loading the package, together with the package
<code>PatientLevelPrediction</code>, since the package
<code>PlasmodeSim</code> is designed to be used with
<code>PatientLevelPrediction</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(PlasmodeSim)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(PatientLevelPrediction)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>modelSettings <span class="ot">&lt;-</span> PatientLevelPrediction<span class="sc">::</span><span class="fu">setLassoLogisticRegression</span>()</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>plpResult <span class="ot">&lt;-</span> PatientLevelPrediction<span class="sc">::</span><span class="fu">loadPlpResult</span>(<span class="st">&quot;~/R/internshipErasmusMC/simulate-new-patients-outcomes/plp_demolog/plpResult&quot;</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>prediction <span class="ot">&lt;-</span> plpResult<span class="sc">$</span>prediction <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(evaluationType <span class="sc">==</span> <span class="st">&quot;Test&quot;</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>plpData<span class="ot">&lt;-</span> PatientLevelPrediction<span class="sc">::</span><span class="fu">loadPlpData</span>(<span class="st">&quot;~/R/internshipErasmusMC/simulate-new-patients-outcomes/plp_demo/plpData&quot;</span> )</span></code></pre></div>
<p>In this file we will show which functions are in the
<code>PatientLevelPrediction</code> package, by adding
<code>PatientLevelPrediction::</code> before the function.</p>
</div>
<div id="example-1" class="section level2">
<h2>Example 1</h2>
<p>In this example we obtain new outcomes of a fitted logistic
model.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>plpModel <span class="ot">&lt;-</span> plpResult<span class="sc">$</span>model</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>newprobs <span class="ot">&lt;-</span> PatientLevelPrediction<span class="sc">::</span><span class="fu">predictPlp</span>(plpModel, plpData, plpData<span class="sc">$</span>cohorts)</span></code></pre></div>
<pre><code>## Removing infrequent and redundant covariates and normalizing
## Removing infrequent and redundant covariates covariates and normalizing took 0.315 secs
## Prediction took 0.254 secs</code></pre>
<p>The function predictPlp returned this information.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>newOut <span class="ot">&lt;-</span> <span class="fu">newOutcomes</span>(<span class="dv">200</span>, newprobs)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(newOut)</span></code></pre></div>
<pre><code>##   rowId newOutcomes
## 1  1255           0
## 2  1755           1
## 3   140           0
## 4  2587           1
## 5  2601           0
## 6    48           0</code></pre>
<p>In the output of newOut patients are drawed randomly with the same
chance, the patients could be drawed multiple times. If this happens
they can have a different outcome. The function <code>newOutcomes</code>
needs a data set where the column that contains the probabilities is
called <code>value</code>.</p>
</div>
<div id="example-2" class="section level2">
<h2>Example 2</h2>
<p>We here we show how to simulate new outcomes from an unfitted
logistic model.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Parameters <span class="ot">&lt;-</span> plpResult<span class="sc">$</span>model<span class="sc">$</span>model<span class="sc">$</span>coefficients</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>UnfittedParameters <span class="ot">&lt;-</span> Parameters</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>UnfittedParameters[<span class="dv">1</span>,<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">0.4</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>UnfittedParameters[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fl">0.4</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(UnfittedParameters)</span></code></pre></div>
<pre><code>##     betas covariateIds
## 1 -0.4000  (Intercept)
## 2  0.4000         6003
## 3  0.4000         8003
## 4  0.4000         9003
## 5  0.0226      8507001
## 6  0.0000     28060210</code></pre>
<p>For the logistic model it is necessary that the parameters are stored
in a dataset with a column called <code>betas</code> and a column called
<code>covariateIds</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>plpModelunfitted <span class="ot">&lt;-</span> <span class="fu">makeModel</span>(UnfittedParameters, <span class="st">&quot;logistic&quot;</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>newprobs <span class="ot">&lt;-</span> PatientLevelPrediction<span class="sc">::</span><span class="fu">predictPlp</span>(plpModelunfitted, plpData,plpData<span class="sc">$</span>cohorts)</span></code></pre></div>
<pre><code>## Removing infrequent and redundant covariates and normalizing
## Removing infrequent and redundant covariates covariates and normalizing took 0.279 secs
## Prediction took 0.252 secs</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>newOut <span class="ot">&lt;-</span> <span class="fu">newOutcomes</span>(<span class="dv">200</span>, newprobs)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(newOut)</span></code></pre></div>
<pre><code>##   rowId newOutcomes
## 1   401           1
## 2  1454           0
## 3  2453           0
## 4  2041           1
## 5  1691           1
## 6   177           1</code></pre>
</div>
<div id="visual-simulations" class="section level2">
<h2>Visual simulations</h2>
<p>The function <code>visualOutcome</code> simulated new data and then
plots the frequency of the outcome. Right now the function
<code>visualOutcome</code> only works for a logistic model. The green
line in the plots is the avegate outcome in the original dataset.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">visualOutcome</span>(plpData,<span class="dv">50</span>,<span class="dv">200</span>,Parameters)</span></code></pre></div>
<pre><code>## Removing infrequent and redundant covariates and normalizing
## Removing infrequent and redundant covariates covariates and normalizing took 0.261 secs
## Prediction took 0.249 secs</code></pre>
<p><img src="data:image/png;base64,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" width="60%" /></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">visualOutcome</span>(plpData,<span class="dv">50</span>,<span class="dv">200</span>,UnfittedParameters)</span></code></pre></div>
<pre><code>## Removing infrequent and redundant covariates and normalizing
## Removing infrequent and redundant covariates covariates and normalizing took 0.274 secs
## Prediction took 0.246 secs</code></pre>
<p><img src="data:image/png;base64,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" width="60%" />
Here we have plotted 50 times the frequency of the outcome for a
simulated dataset with 200 people.</p>
</div>
<div id="visual-of-a-specific-covariate" class="section level2">
<h2>Visual of a specific covariate</h2>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>covariateIdToStudy<span class="ot">&lt;-</span> plpResult<span class="sc">$</span>covariateSummary<span class="sc">$</span>covariateId[<span class="dv">3</span>]</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>UnfittedParameters[<span class="dv">3</span>,]</span></code></pre></div>
<pre><code>##   betas covariateIds
## 3   0.4         8003</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">visualOutcomeCovariateId</span>(plpData, covariateIdToStudy, <span class="dv">20</span>, <span class="dv">200</span>, UnfittedParameters, <span class="st">&quot;logistic&quot;</span>)</span></code></pre></div>
<pre><code>## Removing infrequent and redundant covariates and normalizing
## Removing infrequent and redundant covariates covariates and normalizing took 0.342 secs
## Prediction took 0.279 secs</code></pre>
<p><img src="data:image/png;base64,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" width="60%" /></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">visualOutcomeCovariateId2</span>(plpData, covariateIdToStudy, <span class="dv">20</span>, <span class="dv">200</span>, UnfittedParameters, <span class="st">&quot;logistic&quot;</span>)</span></code></pre></div>
<pre><code>## Removing infrequent and redundant covariates and normalizing
## Removing infrequent and redundant covariates covariates and normalizing took 0.277 secs
## Prediction took 0.29 secs</code></pre>
<p><img src="data:image/png;base64,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" width="60%" /></p>
<p>As one can see <code>visualOutcomeCovariateId</code> and
<code>visualOutcomeCovariateId2</code> are very similiar, they both
calculate and plot the frequency for a group with a specific covariate
present. The small difference is that
<code>visualOutcomeCovariateId</code> filters a newly simulated dataset
set to only keep the patients where the covariate is present, and
<code>visualOutcomeCovariateId2</code> only simulates new outcomes for
patients that have the covariate present. We see they are almost the
identical only <code>visualOutcomeCovariateId2</code> is spread out less
because the groups for calculating the frequency with are bigger.</p>
</div>
<div id="survival-times-outcomes." class="section level2">
<h2>survival times outcomes.</h2>
<p>For simulating new survival times we need more than one probability,
we use the baselinehazard, stored in the plpModel. Now there is a
function called <code>expBetaZ</code> that returns <span class="math inline">\(\exp(\sum_i \beta_i Z_i)\)</span> where <span class="math inline">\(\beta\)</span> is a vector with the parameters and
<span class="math inline">\(Z\)</span> are the covariates of a patients.
This could also be included in the function generating new times. (then
there would be a posibility that the computer computes things twice, but
now maybe it computes expbetaZâ€™s that are never needed).</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>modelSettings <span class="ot">&lt;-</span> PatientLevelPrediction<span class="sc">::</span><span class="fu">setCoxModel</span>()</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>plpResult <span class="ot">&lt;-</span> PatientLevelPrediction<span class="sc">::</span><span class="fu">loadPlpResult</span>(<span class="st">&quot;~/R/internshipErasmusMC/simulate-new-patients-outcomes/plp_demoCox/plpResult&quot;</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>plpModel<span class="ot">&lt;-</span> plpResult<span class="sc">$</span>model</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>plpModel<span class="sc">$</span>trainDetails<span class="sc">$</span>modelName</span></code></pre></div>
<pre><code>## [1] &quot;cox&quot;</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>expbetas <span class="ot">&lt;-</span> <span class="fu">expBetaZ</span>(plpData, plpModel) </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>NewOut <span class="ot">&lt;-</span> <span class="fu">newOutcomesSurvivalTimes</span>(plpModel, expbetas, <span class="dv">20</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(NewOut) </span></code></pre></div>
<pre><code>##   outcome rowId
## 1      40  1665
## 2     365  1464
## 3     365  2426
## 4     365   314
## 5     365  1806
## 6     365  1562</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="do">## in the future there should be a function making an unfitted model. </span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># coefficients &lt;- plpModel$model$coefficients</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># coefficients &lt;- new coefficients </span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># plpModel &lt;- makeCoxModel(coefficients, baselineHazard, timesinthebaselinehazard) # this function i still have to write</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># NewOut &lt;- newOutcomesSurvivalTimes(plpModel, expbetas, 20)</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co"># head(NewOut)</span></span></code></pre></div>
</div>
<div id="to-simulated-censored-data" class="section level2">
<h2>To simulated censored data:</h2>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>plpModelCensoring <span class="ot">&lt;-</span>  plpModel <span class="co">#here should be a function that returns the correct estimate</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>expbetasCensor <span class="ot">&lt;-</span>  expbetas <span class="co">#here should be a function that returns the correct values</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>newCensoredTimes <span class="ot">&lt;-</span> <span class="fu">newOutcomesCensoredSurvivalTimes</span>(plpModelCensoring, expbetasCensor, plpModel, expbetas, <span class="dv">10</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(newCensoredTimes)</span></code></pre></div>
<pre><code>##   rowId     event outcomes
## 1   109   outcome       84
## 2   843   outcome       21
## 3   256 censoring      365
## 4  1908 censoring      365
## 5   517 censoring      365
## 6   597 censoring       54</code></pre>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
